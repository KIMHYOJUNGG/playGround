<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
	<insert id="create">
		insert into board (no, bno, title, bookname, regdate, type, writer)
		values(#{no},#{bno},#{title}, #{bookname}, sysdate, #{type},
		#{writer})
	</insert>
	<select id="read" resultType="total.domain.BoardVO">
		select
		no, title, writer, regdate, viewcnt
		from
		board
		where no = #{no}
	</select>
	<select id="selectNo" resultType="_int">
		select board_seq.nextval as no from dual
	</select>

	<update id="update">
		update board set title =#{title}
		where no = #{no}
	</update>

	<delete id="delete">
		delete from board where no = #{no}
	</delete>

	<select id="mainBoardOrder" resultType="hashmap">
		select * from board order by good asc
	</select>

	<select id="listAll" resultType="total.domain.BoardVO">
 <![CDATA[
 select 
   no, title, writer, regdate, viewcnt   
 from 
   board 
 where no > 0 
 order by no desc, regdate desc
 ]]>
	</select>

	
	<select id="boardid" resultType="hashmap">
		select * from board where writer=#{id} order by red desc
	</select>
	
	<select id="following" resultType="hashmap">
		select * from board
		<if test="following != null">
			where writer in
		</if>
		<foreach collection="following" item="f" open="(" close=")"  separator=","> #{f}</foreach>
	</select>
	<select id="getListById" resultType="hashmap">
		select * from board where writer =#{writer} order by (regdate) asc
	</select>
	<select id="getListByBno" resultType="hashmap">
		select * from board where bno = #{bno}
	</select>
</mapper>

